create database bank_;
use bank_;
create table branch(branch_name varchar(20) primary key,branch_city varchar(20),assets real);
create table bank_account(account_no int,branch_name varchar(20),balance real,primary key(account_no),foreign key(branch_name) references branch(branch_name));
create table bank_customer(customer_name varchar(30),customer_street varchar(30),customer_city varchar(20),primary key(customer_name));
create table deposites(customer_name varchar(30),account_no int,primary key(account_no),foreign key(account_no) references bank_account(account_no),foreign key(customer_name) references bank_customer(customer_name));
drop table bank_customer;
drop table deposites;

create table loan(loan_no int,branch_name varchar(30),amount real,primary key(loan_no),foreign key(branch_name)references branch(branch_name));
insert into branch values('SBI_chamrajpet','Banglore',50000);
insert into branch values('SBI_ResidencyRoad','Banglore',10000);
insert into branch values('SBI_ShivajiRoad','Bombay',20000);
insert into branch values('SBI_ParliamentRoad','Delhi',10000);
insert into branch values('SBI_Jantarmantar','Delhi',20000);
insert into bank_account values(1,'SBI_chamrajpet',2000);
insert into bank_account values(2,'SBI_ResidencyRoad',8000);
insert into bank_account values(3,'SBI_ShivajiRoad',6000);
insert into bank_account values(4,'SBI_ParliamentRoad',9000);
insert into bank_account values(5,'SBI_Jantarmantar',8000);
insert into bank_account values(6,'SBI_ShivajiRoad',4000);
insert into bank_account values(8,'SBI_ResidencyRoad',4000);
insert into bank_account values(9,'SBI_ParliamentRoad',3000);
insert into bank_account values(10,'SBI_ResidencyRoad',5000);
insert into bank_account values(11,'SBI_Jantarmantar',2000);
insert into bank_customer value("Avinash","Bull_Temple_Road","Banglore");
insert into bank_customer value("Dinesh","Bannerghatta_Road","Banglore");
insert into bank_customer value("Mohan","NationalCollege_Road","Banglore");
insert into bank_customer value("Nikhil","Akba_Road","Delhi");
insert into bank_customer value("Pavi","Prithviraj_Road","Delhi");


insert into deposites values("Avinash",1);
insert into deposites values("Dinesh",2);
insert into deposites values("Nikhil",4);
insert into deposites values("Pavi",5);
insert into deposites values("Avinash",8);
insert into deposites values("Nikhil",9);
insert into deposites values("Dinesh",10);
insert into deposites values("Nikhil",11);
insert into loan values(1,'SBI_chamrajpet',1000);
insert into loan values(2,'SBI_ResidencyRoad',2000);
insert into loan values(3,'SBI_ShivajiRoad',3000);
insert into loan values(4,'SBI_ParliamentRoad',4000);
insert into loan values(5,'SBI_Jantarmantar',5000);
select d.customer_name,b.branch_name from depositor d join bank_account b on d.acc_no=b.acc_no group by d.customer_name,b.branch_name having count(b.acc_no)>=2;
select branch_name,(assets/100000) as assets_in_lakh from branch;
select d.customer_name,b.branch_name from depositor d join bank_account b on d.acc_no=b.acc_no group by d.customer_name,b.branch_name having count(d.acc_no)>=2;
create view Branch_loan_info AS SELECT branch_name,sum(amount) AS total_loan_amount FROM loan group by branch_name;
Select * from Branch_loan_info;
update bank_account set balance=balance*1.05;
select b1.branch_name from branch b1 where b1.assets>all(select b2.assets from branch b2 where b2.branch_city="Bangalore");
